
<!doctype html>
<html lang="tr" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BIST Pro v2 â€” Ã‡ok Zaman Dilimli Rehber (EÄŸitsel)</title>
  <meta name="description" content="BIST iÃ§in Ã§ok zaman dilimli teknik Ã¶zet, geliÅŸmiÅŸ grafik, piyasa saati, risk/Monte Carlo, iÅŸlem gÃ¼nlÃ¼ÄŸÃ¼, PWA â€” Mac & iPhone." />
  <!-- iOS/PWA -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="BIST Pro v2">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0f1115" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">BIST Pro v2 <span class="sub">â€” Ã‡ok Zaman Dilimli Rehber</span></div>
    <nav class="nav">
      <button id="installBtn" class="btn ghost" hidden>YÃ¼kle</button>
      <button id="themeBtn" class="btn ghost" title="Tema">ğŸŒ—</button>
      <a class="btn ghost" href="README-TR.md" target="_blank" rel="noopener">KÄ±lavuz</a>
      <button id="shareBtn" class="btn ghost">PaylaÅŸ</button>
    </nav>
  </header>

  <main class="container">
    <!-- Piyasa saati + durum -->
    <section class="card">
      <div class="section-title">Piyasa Saati & Durum</div>
      <div class="market-clock">
        <div class="clock-row">
          <div><b>Durum:</b> <span id="mktStatus">â€”</span></div>
          <div><b>Åimdi (IST):</b> <span id="nowIST">â€”</span></div>
          <div><b>Geri SayÄ±m:</b> <span id="countdown">â€”</span></div>
        </div>
        <div class="clock-row small muted">
          <div>Seans 1: <span id="sess1">â€”</span></div>
          <div>Ara: <span id="break">â€”</span></div>
          <div>Seans 2: <span id="sess2">â€”</span></div>
        </div>
      </div>
      <p class="muted">Seans saatleri deÄŸiÅŸebilir; bu saatler ayarlanabilir. ResmÃ® duyurulara gÃ¶re gÃ¼ncelleyiniz.</p>
    </section>

    <!-- Kontrol Paneli -->
    <section class="card">
      <div class="section-title">Sembol & Zaman Dilimi</div>
      <div class="controls">
        <input id="symbolInput" type="text" list="bist-list" placeholder="Ã–rn: BIST:THYAO" value="BIST:XU100" aria-label="BIST sembolÃ¼" />
        <datalist id="bist-list">
          <option value="BIST:XU100"></option>
          <option value="BIST:THYAO"></option>
          <option value="BIST:ASELS"></option>
          <option value="BIST:GARAN"></option>
          <option value="BIST:AKBNK"></option>
          <option value="BIST:TUPRS"></option>
          <option value="BIST:BIMAS"></option>
          <option value="BIST:SISE"></option>
          <option value="BIST:KCHOL"></option>
          <option value="BIST:FROTO"></option>
          <option value="BIST:EREGL"></option>
          <option value="BIST:HEKTS"></option>
          <option value="BIST:PETKM"></option>
        </datalist>

        <div class="seg" role="tablist" aria-label="GÃ¶rÃ¼nÃ¼m">
          <button class="active" data-ival="1D" aria-selected="true">GÃ¼nlÃ¼k</button>
          <button data-ival="1h" aria-selected="false">Saatlik</button>
          <button data-ival="5m" aria-selected="false">5 Dak</button>
          <button data-ival="1m" aria-selected="false">1 Dak</button>
        </div>

        <button class="btn" id="applyBtn">Uygula</button>
        <button class="btn" id="addWatch">Ä°zlemeye Ekle</button>
        <button class="btn ghost" id="openSettings">Ayarlar</button>
      </div>
      <p class="muted">Ä°pucu: BIST sembollerini <code>BIST:THYAO</code> gibi yazÄ±n. Endeks iÃ§in <code>BIST:XU100</code>.</p>
    </section>

    <!-- 3 sÃ¼tun profesyonel gÃ¶rÃ¼nÃ¼m -->
    <section class="grid3">
      <div class="card">
        <div class="section-title">Teknik Ã–zet â€” 1D</div>
        <div id="tv-tech-1d"></div>
      </div>
      <div class="card">
        <div class="section-title">Teknik Ã–zet â€” 1h</div>
        <div id="tv-tech-1h"></div>
      </div>
      <div class="card">
        <div class="section-title">Teknik Ã–zet â€” 1m</div>
        <div id="tv-tech-1m"></div>
      </div>
      <div class="card wide">
        <div class="section-title">Grafik (TradingView â€” geliÅŸmiÅŸ)</div>
        <div id="tv-adv-chart"></div>
      </div>
    </section>

    <section class="grid2">
      <!-- Ä°zleme Listesi -->
      <div class="card">
        <div class="section-title">Ä°zleme Listem</div>
        <div class="watch-actions">
          <button id="wlExport" class="btn ghost">DÄ±ÅŸa Aktar (CSV)</button>
          <label class="btn ghost filelabel">Ä°Ã§e Aktar (CSV)<input id="wlImport" type="file" accept=".csv" hidden></label>
        </div>
        <ul id="watchlist" class="watch"></ul>
        <div class="muted">Bir sembole tÄ±klayÄ±nca o sembole geÃ§ilir. SaÄŸdaki Ã§arpÄ± ile kaldÄ±rabilirsiniz.</div>
      </div>

      <!-- Risk YÃ¶netimi + Pozisyon Boyutu -->
      <div class="card">
        <div class="section-title">Risk YÃ¶netimi HesaplayÄ±cÄ±</div>
        <div class="kv">
          <label>Hesap (TRY)<input id="equity" type="number" min="0" step="10" value="1000"></label>
          <label>Risk / Ä°ÅŸlem (%)<input id="riskPct" type="number" min="0.1" step="0.1" value="1.0"></label>
          <label>Fiyat (TRY)<input id="price" type="number" min="0.01" step="0.01" value="100.00"></label>
          <label>Stop Mesafesi (TRY/lot)<input id="stop" type="number" min="0.01" step="0.01" value="0.50"></label>
          <label>Slip+Komisyon (TRY/lot)<input id="slip" type="number" min="0" step="0.01" value="0.05"></label>
          <label>AdÄ±m (Tick) (TRY)<input id="tick" type="number" min="0.01" step="0.01" value="0.01"></label>
        </div>
        <div id="riskOut" class="out"></div>
        <p class="foot">Lot ve fiyat <b>tick</b> adÄ±mÄ±na yuvarlanÄ±r. Bu bir eÄŸitim aracÄ±dÄ±r; yatÄ±rÄ±m tavsiyesi deÄŸildir.</p>
      </div>
    </section>

    <!-- Monte Carlo + Beklenti -->
    <section class="card">
      <div class="section-title">Monte Carlo (BileÅŸik bÃ¼yÃ¼me simÃ¼lasyonu)</div>
      <div class="kv mc">
        <label>BaÅŸlangÄ±Ã§ (TRY)<input id="mcEquity" type="number" min="0" step="50" value="1000"></label>
        <label>Risk / Ä°ÅŸlem (%)<input id="mcRisk" type="number" min="0.1" step="0.1" value="1.0"></label>
        <label>Kazanma OranÄ± (%)<input id="mcWin" type="number" min="0" max="100" step="1" value="45"></label>
        <label>Ã–dÃ¼l/Risk (R)<input id="mcRR" type="number" min="0.1" step="0.1" value="1.5"></label>
        <label>Ä°ÅŸlem SayÄ±sÄ±<input id="mcN" type="number" min="1" step="10" value="100"></label>
        <label>KoÅŸu (simÃ¼lasyon) adedi<input id="mcRuns" type="number" min="100" step="100" value="2000"></label>
      </div>
      <div class="controls">
        <button class="btn" id="mcRun">SimÃ¼lasyonu Ã‡alÄ±ÅŸtÄ±r</button>
        <button class="btn ghost" id="mcReset">SÄ±fÄ±rla</button>
      </div>
      <div id="mcOut" class="out"></div>
      <canvas id="mcChart" width="800" height="280" class="chart"></canvas>
      <p class="foot">Basit model: KazanÃ§ta sermaye Ã— (1 + risk% Ã— R), kayÄ±pta sermaye Ã— (1 âˆ’ risk%). SonuÃ§lar istatistikseldir, garantilemez.</p>
    </section>

    <!-- Ä°ÅŸlem GÃ¼nlÃ¼ÄŸÃ¼ + Ä°statistik + EÄŸri -->
    <section class="card">
      <div class="section-title">Ä°ÅŸlem GÃ¼nlÃ¼ÄŸÃ¼ (Yerel) & Ä°statistikler</div>
      <div class="journal-inp">
        <input id="jnl-date" type="datetime-local">
        <input id="jnl-symbol" type="text" placeholder="BIST:THYAO">
        <select id="jnl-side"><option>Long</option><option>Short</option></select>
        <input id="jnl-entry" type="number" step="0.01" placeholder="GiriÅŸ">
        <input id="jnl-stop" type="number" step="0.01" placeholder="Stop">
        <input id="jnl-target" type="number" step="0.01" placeholder="Hedef">
        <input id="jnl-risk" type="number" step="0.01" placeholder="Risk (TRY)">
        <input id="jnl-result" type="number" step="0.01" placeholder="SonuÃ§ (TRY)">
        <input id="jnl-notes" type="text" placeholder="Notlar">
        <button id="jnl-add" class="btn">Ekle</button>
        <button id="jnl-export" class="btn ghost">CSV DÄ±ÅŸaÂ Aktar</button>
        <label class="btn ghost filelabel">CSV Ä°Ã§e Aktar<input id="jnl-import" type="file" accept=".csv" hidden></label>
        <button id="jnl-clear" class="btn danger">Temizle</button>
      </div>
      <div class="stats grid4" id="jnl-stats"></div>
      <div class="table-wrap">
        <table id="jnl-table" class="tbl">
          <thead><tr>
            <th>Tarih</th><th>Sembol</th><th>YÃ¶n</th><th>GiriÅŸ</th><th>Stop</th><th>Hedef</th><th>Risk</th><th>SonuÃ§</th><th>Not</th><th></th>
          </tr></thead>
          <tbody></tbody>
        </table>
      </div>
      <canvas id="eqChart" width="800" height="280" class="chart"></canvas>
      <p class="foot">Veriler cihazÄ±nÄ±zda saklanÄ±r (<code>localStorage</code>). Ä°statistikler: KazanÃ§ oranÄ±, ort. kazanÃ§/kayÄ±p, <i>expectancy</i>, max drawdown.</p>
    </section>

    <!-- Ayarlar Modal -->
    <dialog id="settingsDlg">
      <form method="dialog" class="modal">
        <h3>Ayarlar</h3>
        <div class="grid2">
          <div>
            <h4>Seans Saatleri (IST)</h4>
            <label>AÃ§Ä±lÄ±ÅŸ (Seans 1) <input id="setOpen1" type="time" value="10:00"></label>
            <label>Ã–ÄŸle ArasÄ± BaÅŸlangÄ±Ã§ <input id="setBreakStart" type="time" value="13:00"></label>
            <label>Ã–ÄŸle ArasÄ± BitiÅŸ <input id="setBreakEnd" type="time" value="14:00"></label>
            <label>KapanÄ±ÅŸ (Seans 2) <input id="setClose2" type="time" value="18:00"></label>
          </div>
          <div>
            <h4>Genel</h4>
            <label>Tick AdÄ±mÄ± (TRY) <input id="setTick" type="number" step="0.01" value="0.01"></label>
            <label>Zaman Dilimi <select id="setTZ">
              <option value="Europe/Istanbul" selected>Europe/Istanbul</option>
              <option value="local">Cihaz Saati</option>
            </select></label>
            <label>Tema <select id="setTheme">
              <option value="dark" selected>Koyu</option>
              <option value="light">AÃ§Ä±k</option>
            </select></label>
          </div>
        </div>
        <div class="modal-actions">
          <button value="cancel" class="btn ghost">Ä°ptal</button>
          <button id="btnSaveSettings" value="default" class="btn">Kaydet</button>
        </div>
      </form>
    </dialog>

    <!-- UyarÄ± -->
    <section class="card">
      <div class="section-title">UyarÄ± & Sorumluluk Reddi</div>
      <p class="muted">
        KÄ±sa vadede sermayeyi â€œkatlamaâ€ hedefi Ã§ok yÃ¼ksek risk iÃ§erir. Bu uygulama <b>eÄŸitim amaÃ§lÄ±dÄ±r</b>, <b>yatÄ±rÄ±m tavsiyesi deÄŸildir</b>.
        Seans saatleri ve piyasa kurallarÄ± deÄŸiÅŸebilir; iÅŸlemden Ã¶nce resmÃ® kaynaklarÄ± kontrol ediniz.
      </p>
    </section>
  </main>

  <footer class="footbar">
    <span>Â© 2025 BIST Pro v2 â€” PWA</span>
    <span>KiÅŸisel kullanÄ±m iÃ§indir.</span>
  </footer>

  <script src="app.js"></script>
</body>
</html>

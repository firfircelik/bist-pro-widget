
<!doctype html>
<html lang="tr" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BIST Pro v4 â€” Hisse + Kripto (EÄŸitsel)</title>
  <meta name="description" content="BIST ve Kripto iÃ§in Ã§ok zaman dilimli rehber: Screener Top 20, Strateji Lab (MTF + Breakout/ATR), geri bildirimli uyarÄ±lar, PWA." />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="BIST Pro v4">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0f1115" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">BIST Pro v4 <span class="sub">â€” Hisse + Kripto</span></div>
    <nav class="nav">
      <button id="installBtn" class="btn ghost" hidden>YÃ¼kle</button>
      <button id="themeBtn" class="btn ghost" title="Tema">ğŸŒ—</button>
      <a class="btn ghost" href="README-TR.md" target="_blank" rel="noopener">KÄ±lavuz</a>
      <button id="shareBtn" class="btn ghost">PaylaÅŸ</button>
    </nav>
  </header>

  <main class="container">

    <!-- Market Switch -->
    <section class="card">
      <div class="section-title">Pazar</div>
      <div class="seg" role="tablist" aria-label="Pazar">
        <button data-mkt="BIST" class="active">BIST</button>
        <button data-mkt="CRYPTO">Kripto</button>
      </div>
      <p class="muted">BIST iÃ§in sembol biÃ§imi <code>BIST:THYAO</code>; Kripto iÃ§in <code>BINANCE:BTCUSDT</code> veya sadece <code>BTCUSDT</code>.</p>
    </section>

    <!-- Top 20 -->
    <section class="card">
      <div class="section-title">Top 20</div>
      <div class="seg" role="tablist" aria-label="Top20">
        <button class="active" data-screen="top_gainers">YÃ¼kselenler</button>
        <button data-screen="top_losers">DÃ¼ÅŸenler</button>
        <button data-screen="volume_leaders">Hacim</button>
        <button data-screen="most_volatile">Volatil</button>
      </div>
      <div id="screenerWrap" class="screener-wrap"></div>
      <div class="muted foot" id="screenerNote"></div>
    </section>

    <!-- Sembol & Zaman -->
    <section class="card">
      <div class="section-title">Sembol & Zaman Dilimi</div>
      <div class="controls">
        <input id="symbolInput" type="text" list="bist-list" placeholder="Ã–rn: BIST:THYAO veya BTCUSDT" value="BIST:XU100" aria-label="Sembol" />
        <datalist id="bist-list"></datalist>
        <div class="seg" role="tablist" aria-label="GÃ¶rÃ¼nÃ¼m">
          <button class="active" data-ival="1D" aria-selected="true">GÃ¼nlÃ¼k</button>
          <button data-ival="1h">Saatlik</button>
          <button data-ival="5m">5 Dak</button>
          <button data-ival="1m">1 Dak</button>
        </div>
        <button class="btn" id="applyBtn">Uygula</button>
        <button class="btn" id="addWatch">Ä°zlemeye Ekle</button>
        <button class="btn ghost" id="openSettings">Ayarlar</button>
      </div>
    </section>

    <!-- Teknik Ã¶zet + Grafik -->
    <section class="grid3">
      <div class="card"><div class="section-title">Teknik Ã–zet â€” 1D</div><div id="tv-tech-1d"></div></div>
      <div class="card"><div class="section-title">Teknik Ã–zet â€” 1h</div><div id="tv-tech-1h"></div></div>
      <div class="card"><div class="section-title">Teknik Ã–zet â€” 1m</div><div id="tv-tech-1m"></div></div>
      <div class="card wide"><div class="section-title">GeliÅŸmiÅŸ Grafik</div><div id="tv-adv-chart"></div></div>
    </section>

    <!-- Strategy Lab -->
    <section class="card">
      <div class="section-title">Strateji Lab â€” MTF Uyumu + Breakout/ATR</div>
      <div class="kv">
        <label>MTF AyarÄ±<select id="stMTF"><option value="D-H-5m" selected>1D trend + 1h momentum + 5m breakout</option></select></label>
        <label>ATR KatsayÄ± (Stop)<input id="stATR" type="number" step="0.1" value="1.5"></label>
        <label>HÄ±zlÄ± Backtest AralÄ±ÄŸÄ±<select id="stRange"><option value="1mo">1 Ay</option><option value="3mo" selected>3 Ay</option><option value="6mo">6 Ay</option></select></label>
      </div>
      <div class="controls">
        <button id="stAnalyze" class="btn">Analiz Et</button>
        <button id="stBacktest" class="btn ghost">HÄ±zlÄ± Backtest</button>
        <button id="stAlert" class="btn">Kuralla Bildirim</button>
      </div>
      <div id="stOut" class="out"></div>
      <canvas id="stChart" width="900" height="280" class="chart"></canvas>
    </section>

    <!-- Watchlist + Risk -->
    <section class="grid2">
      <div class="card">
        <div class="section-title">Ä°zleme Listem</div>
        <ul id="watchlist" class="watch"></ul>
      </div>
      <div class="card">
        <div class="section-title">Risk HesaplayÄ±cÄ±</div>
        <div class="kv">
          <label>Hesap (TRY)<input id="equity" type="number" min="0" step="10" value="1000"></label>
          <label>Risk / Ä°ÅŸlem (%)<input id="riskPct" type="number" min="0.1" step="0.1" value="1.0"></label>
          <label>Fiyat (TRY)<input id="price" type="number" min="0.01" step="0.01" value="100.00"></label>
          <label>Stop Mesafesi (TRY/lot)<input id="stop" type="number" min="0.01" step="0.01" value="0.50"></label>
          <label>Slip+Komisyon (TRY/lot)<input id="slip" type="number" min="0" step="0.01" value="0.05"></label>
          <label>AdÄ±m (Tick) (TRY)<input id="tick" type="number" min="0.01" step="0.01" value="0.01"></label>
        </div>
        <div id="riskOut" class="out"></div>
      </div>
    </section>

    <!-- Midas HÄ±zlÄ± Emir -->
    <section class="card">
      <div class="section-title">Midas HÄ±zlÄ± Emir (Manuel)</div>
      <div class="kv">
        <label>YÃ¶n<select id="mdSide"><option>AL</option><option>SAT</option></select></label>
        <label>Adet/Lot<input id="mdQty" type="number" step="1" value="1"></label>
        <label>TÃ¼r<select id="mdType"><option>Limit</option><option>Piyasa</option></select></label>
        <label>Fiyat<input id="mdPx" type="number" step="0.01" value="0"></label>
        <label>Not<input id="mdNote" type="text" placeholder="(opsiyonel)"></label>
      </div>
      <div class="controls">
        <button id="mdCopy" class="btn">Emri Kopyala</button>
        <a id="mdLink" class="btn ghost" href="https://www.getmidas.com/midas-kripto/" target="_blank" rel="noopener">Midas Kripto'yu AÃ§</a>
      </div>
      <p class="muted">Midas, ÅŸu an halka aÃ§Ä±k bir alÄ±m-satÄ±m API'sÄ± paylaÅŸmÄ±yor. Bu bÃ¶lÃ¼m, emri kopyalayÄ±p uygulamada <b>manuel</b> girmeniz iÃ§in tasarlanmÄ±ÅŸtÄ±r.</p>
    </section>

    <!-- UyarÄ±lar -->
    <section class="card">
      <div class="section-title">Bildirimler (Web Push)</div>
      <div class="controls">
        <button id="subPush" class="btn">Bildirimlere Abone Ol</button>
        <button id="testPush" class="btn ghost">Test Bildirim</button>
      </div>
      <div class="muted">Ayarlarâ€™dan Sunucu URL + VAPID Public Key girin. iOS iÃ§in 16.4+ ve Ana Ekrana Ekle gereklidir.</div>
    </section>

    <!-- UyarÄ± -->
    <section class="card">
      <div class="section-title">UyarÄ± & Sorumluluk Reddi</div>
      <p class="muted">Bu uygulama <b>eÄŸitim amaÃ§lÄ±dÄ±r</b>, <b>yatÄ±rÄ±m tavsiyesi deÄŸildir</b>. Veriler gecikmeli/eksik olabilir. Kurallar ve seans saatleri deÄŸiÅŸebilir; resmÃ® kaynaklarÄ± takip ediniz.</p>
    </section>

    <!-- Ayarlar Modal -->
    <dialog id="settingsDlg">
      <form method="dialog" class="modal">
        <h3>Ayarlar</h3>
        <div class="grid2">
          <div>
            <h4>Genel</h4>
            <label>Tema <select id="setTheme"><option value="dark" selected>Koyu</option><option value="light">AÃ§Ä±k</option></select></label>
            <label>Tick AdÄ±mÄ± (TRY) <input id="setTick" type="number" step="0.01" value="0.01"></label>
            <label>Zaman Dilimi <select id="setTZ"><option value="Europe/Istanbul" selected>Europe/Istanbul</option><option value="local">Cihaz Saati</option></select></label>
          </div>
          <div>
            <h4>Push Sunucu</h4>
            <label>Sunucu URL <input id="setServer" type="url" placeholder="https://sizin-sunucu.com"></label>
            <label>VAPID Public Key <input id="setVapid" type="text" placeholder="BP... (Base64)"></label>
          </div>
        </div>
        <div class="modal-actions">
          <button value="cancel" class="btn ghost">Ä°ptal</button>
          <button id="btnSaveSettings" value="default" class="btn">Kaydet</button>
        </div>
      </form>
    </dialog>

  </main>

  <footer class="footbar">
    <span>Â© 2025 BIST Pro v4 â€” PWA</span>
    <span>KiÅŸisel kullanÄ±m iÃ§indir.</span>
  </footer>

  <script src="app.js"></script>
</body>
</html>
